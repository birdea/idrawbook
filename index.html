<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>iDrawBook</title>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script src="https://apis.google.com/js/api.js" async defer></script>
</head>

<body>
  <header>
    <div class="logo">iDrawBook</div>
    <!-- Top actions removed as requested -->
  </header>

  <!-- Menu Bar -->
  <div class="menu-bar">
    <div class="menu-item" data-menu="file">
      <span>BOOK</span>
      <div class="menu-dropdown">
        <button id="menu-new">New Book</button>
        <button id="menu-open">Open Book <span class="shortcut text-todo">[TODO]</span></button>
        <button id="menu-close">Close Book <span class="shortcut text-todo">[TODO]</span></button>
        <button id="menu-delete">Delete Book <span class="shortcut text-todo">[TODO]</span></button>
        <button id="menu-save">Save Book</button>
        <button id="menu-recent">Recent Books <span class="shortcut text-todo">[TODO]</span></button>
        <div class="menu-separator"></div>
        <button id="menu-settings">Settings</button>
      </div>
    </div>
    <div class="menu-item" data-menu="edit">
      <span>EDIT</span>
      <div class="menu-dropdown">
        <button id="menu-undo">Undo <span class="shortcut">⌘Z</span></button>
        <button id="menu-redo">Redo <span class="shortcut">⌘⇧Z</span></button>
        <div class="menu-separator"></div>
        <button id="menu-cut">Cut <span class="shortcut text-todo">[TODO]</span></button>
        <button id="menu-copy">Copy <span class="shortcut text-todo">[TODO]</span></button>
        <button id="menu-paste">Paste <span class="shortcut text-todo">[TODO]</span></button>
        <button id="menu-delete-edit">Delete <span class="shortcut text-todo">[TODO]</span></button>
        <div class="menu-separator"></div>
        <button id="menu-select">Select <span class="shortcut text-todo">[TODO]</span></button>
        <button id="menu-select-all">Select All <span class="shortcut text-todo">[TODO]</span></button>
      </div>
    </div>
    <div class="menu-item" data-menu="view">
      <span>VIEW</span>
      <div class="menu-dropdown">
        <button id="menu-toggle-left">Hide Toolbar (L) <span class="shortcut">^L</span></button>
        <button id="menu-toggle-right">Hide Toolbar (R) <span class="shortcut">^R</span></button>
      </div>
    </div>
    <div class="menu-item" data-menu="account">
      <span>ACCOUNT</span>
      <div class="menu-dropdown">
        <button id="menu-google-login">
          <span id="menu-google-icon" class="icon-left"></span>
          <span>Sign in Google</span>
        </button>
        <div id="menu-user-info" class="hidden">
          <div class="user-info-display">
            <img id="menu-user-avatar" src="" alt="Avatar">
            <span id="menu-user-name"></span>
          </div>
          <button id="menu-google-logout">Sign out</button>
        </div>
      </div>
    </div>
    <div class="menu-item" data-menu="help">
      <span>HELP</span>
      <div class="menu-dropdown">
        <button id="menu-search">Search...</button>
        <div class="menu-separator"></div>
        <button id="menu-about">About iDrawBook</button>
        <button id="menu-contacts">Contacts</button>
      </div>
    </div>
  </div>

  <main class="main-container">
    <aside class="tool-panel">
      <div class="tool-group" id="drawing-tools">
        <button class="tool-btn active" id="tool-pencil" data-tool="pencil" data-tooltip="Pencil (^P)"></button>
        <button class="tool-btn" id="tool-brush" data-tool="brush" data-tooltip="Brush (^B)"></button>
        <button class="tool-btn" id="tool-pen" data-tool="pen" data-tooltip="Pen"></button>
        <button class="tool-btn" id="tool-fill" data-tool="fill" data-tooltip="Fill Color (F)"></button>
        <button class="tool-btn" id="tool-eraser" data-tool="eraser" data-tooltip="Eraser (^E)"></button>
      </div>
      <div class="tool-group" id="shape-tools">
        <button class="tool-btn" id="tool-line" data-tool="line" data-tooltip="Line"></button>
        <button class="tool-btn" id="tool-rect" data-tool="rect" data-tooltip="Rectangle"></button>
        <button class="tool-btn" id="tool-circle" data-tool="circle" data-tooltip="Circle"></button>
        <button class="tool-btn" id="tool-hand" data-tool="hand" data-tooltip="Hand (^H)"></button>
        <button class="tool-btn" id="tool-move" data-tool="move" data-tooltip="Move (^M)"></button>
      </div>
    </aside>

    <section class="canvas-wrapper" id="canvas-container">
      <canvas id="main-canvas"></canvas>
      <button id="add-page-btn" data-tooltip="Add Page">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="12" y1="5" x2="12" y2="19"></line>
          <line x1="5" y1="12" x2="19" y2="12"></line>
        </svg>
      </button>
      <div id="zoom-level">100%</div>
    </section>

    <aside class="properties-panel">
      <div class="prop-section collapsible" id="section-stroke">
        <div class="prop-header">
          <h3>Stroke</h3>
          <span class="chevron-icon" id="icon-chevron-stroke"></span>
        </div>
        <div class="prop-content">
          <div class="prop-control">
            <label>Size</label>
            <input type="range" id="stroke-size" min="1" max="50" value="5">
          </div>
          <div class="prop-control">
            <label>Opacity</label>
            <input type="range" id="stroke-opacity" min="1" max="100" value="100">
          </div>
          <div class="prop-control">
            <label>Hardness</label>
            <input type="range" id="stroke-hardness" min="0" max="100" value="100">
          </div>
          <div class="prop-control">
            <label>Pressure Sensitivity</label>
            <input type="range" id="stroke-pressure" min="0" max="100" value="50">
          </div>
        </div>
      </div>

      <div class="prop-section collapsible" id="section-color">
        <div class="prop-header">
          <h3>Color</h3>
          <span class="chevron-icon" id="icon-chevron-color"></span>
        </div>
        <div class="prop-content">
          <div class="color-grid">
            <div class="color-swatch active" style="background: #000000;" data-color="#000000"></div>
            <div class="color-swatch" style="background: #FFFFFF;" data-color="#FFFFFF"></div>
            <div class="color-swatch" style="background: #FF3B30;" data-color="#FF3B30"></div>
            <div class="color-swatch" style="background: #FF9500;" data-color="#FF9500"></div>
            <div class="color-swatch" style="background: #FFCC00;" data-color="#FFCC00"></div>
            <div class="color-swatch" style="background: #34C759;" data-color="#34C759"></div>
            <div class="color-swatch" style="background: #007AFF;" data-color="#007AFF"></div>
            <div class="color-swatch" style="background: #5856D6;" data-color="#5856D6"></div>
            <div class="color-swatch" style="background: #AF52DE;" data-color="#AF52DE"></div>
            <div class="color-swatch" style="background: #A2845E;" data-color="#A2845E"></div>
          </div>
          <div class="custom-color-picker">
            <input type="color" id="color-picker" value="#000000">
          </div>
        </div>
      </div>

      <div class="prop-section collapsible" id="section-canvas">
        <div class="prop-header">
          <h3>Canvas</h3>
          <span class="chevron-icon" id="icon-chevron-canvas"></span>
        </div>
        <div class="prop-content">
          <div class="prop-control">
            <span id="canvas-info" style="font-size: 14px; font-weight: 500; color: var(--apple-text);">Page (1/1) :
              1024 x 1024 px</span>
          </div>
        </div>
      </div>

      <div class="prop-section collapsible" id="section-preview">
        <div class="prop-header">
          <h3>Preview</h3>
          <span class="chevron-icon" id="icon-chevron-preview"></span>
        </div>
        <div class="prop-content">
          <div class="preview-list" id="preview-list">
          </div>
        </div>
      </div>
    </aside>
  </main>

  <!-- Drive Export Modal -->
  <div id="drive-modal" class="modal-overlay hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Save to Google Drive</h3>
        <button id="modal-close" class="close-btn">&times;</button>
      </div>
      <div class="modal-body">
        <div class="input-group">
          <label for="drive-filename">Filename</label>
          <input type="text" id="drive-filename" placeholder="Enter filename">
        </div>
        <div class="input-group">
          <label>Save Location</label>
          <div class="folder-selector-ui">
            <span id="selected-folder-name" class="folder-display">My Drive (Root)</span>
            <button id="change-folder-btn" class="btn-text small">Change Folder</button>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="modal-cancel-btn" class="btn-text">Cancel</button>
        <button id="modal-save-btn" class="btn-primary">Save to Drive</button>
      </div>
    </div>
  </div>

  <!-- Mobile Bottom Bar (Visible only on mobile) -->
  <div class="mobile-bottom-bar hidden-desktop" id="mobile-bottom-bar">
    <!-- Buttons will be injected dynamically -->
  </div>

  <!-- Mobile Generic Section Modal -->
  <div id="mobile-generic-modal" class="modal-overlay hidden">
    <div class="modal-content bottom-sheet">
      <div class="modal-header">
        <h3 id="mobile-modal-title">Settings</h3>
        <button id="mobile-modal-close" class="close-btn">&times;</button>
      </div>
      <div class="modal-body" id="mobile-modal-body">
        <!-- Section content will be moved here dynamically -->
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settings-modal" class="modal-overlay hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Settings</h3>
        <button id="settings-close" class="close-btn">&times;</button>
      </div>
      <div class="modal-body">
        <div class="input-group">
          <label>History Limit (Undo/Redo)</label>
          <input type="number" id="history-limit" value="100" min="10" max="500">
          <span class="hint">Max number of actions to remember.</span>
        </div>
        <div class="input-group">
          <label>Preview Limit</label>
          <input type="number" id="preview-limit" value="100" min="1" max="100">
          <span class="hint">Max number of previews to show.</span>
        </div>
      </div>
      <div class="modal-footer">
        <button id="settings-cancel-btn" class="btn-text">Cancel</button>
        <button id="settings-save-btn" class="btn-primary">Save Changes</button>
      </div>
    </div>
  </div>

  <!-- New Book Modal -->
  <div id="new-book-modal" class="modal-overlay hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3>New Book</h3>
        <button id="new-book-close" class="close-btn">&times;</button>
      </div>
      <div class="modal-body">
        <div class="input-group">
          <label>Width (px)</label>
          <input type="number" id="new-book-width" value="1024" min="100" max="10000">
        </div>
        <div class="input-group">
          <label>Height (px)</label>
          <input type="number" id="new-book-height" value="1024" min="100" max="10000">
        </div>
      </div>
      <div class="modal-footer">
        <button id="new-book-cancel-btn" class="btn-text">Cancel</button>
        <button id="new-book-create-btn" class="btn-primary">Create</button>
      </div>
    </div>
  </div>

  <!-- New Page Modal -->
  <div id="new-page-modal" class="modal-overlay hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3>New Page</h3>
        <button id="new-page-close" class="close-btn">&times;</button>
      </div>
      <div class="modal-body">
        <div class="input-group">
          <label>Width (px)</label>
          <input type="number" id="new-page-width" value="1024" min="100" max="5000">
        </div>
        <div class="input-group">
          <label>Height (px)</label>
          <input type="number" id="new-page-height" value="1024" min="100" max="5000">
        </div>
      </div>
      <div class="modal-footer">
        <button id="new-page-cancel-btn" class="btn-text">Cancel</button>
        <button id="new-page-create-btn" class="btn-primary">Add Page</button>
      </div>
    </div>
  </div>

  <script type="module" src="/src/main.ts"></script>
</body>

</html>